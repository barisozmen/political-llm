{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Setup Your Political Values - Political God LLM{% endblock %}
{% block description %}Configure your political philosophy and values to guide AI law generation for your network state.{% endblock %}

{% block extra_css %}
<style>
    .values-container {
        max-width: 900px;
        margin: 0 auto;
    }
    
    .values-form {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .philosophy-examples {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
    }
    
    .example-philosophy {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .example-philosophy:hover {
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .progress-indicator {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 30px;
    }
    
    .form-section {
        margin-bottom: 30px;
        padding: 20px;
        border-radius: 15px;
        border: 1px solid #e9ecef;
    }
    
    .form-section h5 {
        color: #667eea;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="values-container">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold text-primary">
                <i class="fas fa-brain me-3"></i>Setup Your Political Values
            </h1>
            <p class="lead text-muted">Define your political philosophy to guide AI law generation</p>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator">
            <h5 class="mb-2">
                <i class="fas fa-cog me-2"></i>Configure Your Network State's Foundation
            </h5>
            <p class="mb-0">These values will shape every law generated by the AI. Take your time to be thorough and thoughtful.</p>
        </div>

        <!-- Philosophy Examples -->
        <div class="philosophy-examples">
            <h5 class="mb-3">
                <i class="fas fa-lightbulb text-warning me-2"></i>Example Political Philosophies
            </h5>
            <p class="text-muted mb-3">Click any example to use as inspiration:</p>
            
            <div class="example-philosophy" onclick="usePhilosophyExample('I believe in a technologically progressive society that prioritizes individual freedom while ensuring collective prosperity. Government should be minimal but effective, focusing on enabling innovation, protecting privacy, and creating opportunities for all citizens to thrive in the digital age.')">
                <strong>Tech-Progressive Libertarian</strong>
                <p class="text-muted mb-0 small">Minimal government, maximum innovation, strong individual rights</p>
            </div>
            
            <div class="example-philosophy" onclick="usePhilosophyExample('I envision a democratic socialist society that balances social justice with economic freedom. The state should ensure universal access to education, healthcare, and basic needs while fostering entrepreneurship and innovation. Decisions should be made collectively with strong environmental protection.')">
                <strong>Democratic Socialist</strong>
                <p class="text-muted mb-0 small">Social justice, collective decision-making, environmental focus</p>
            </div>
            
            <div class="example-philosophy" onclick="usePhilosophyExample('I advocate for evidence-based governance led by experts and informed citizens. Policy should be driven by data, scientific research, and rational analysis. The goal is to optimize societal outcomes through efficient resource allocation and merit-based systems.')">
                <strong>Technocratic Rationalist</strong>
                <p class="text-muted mb-0 small">Evidence-based policy, expert governance, data-driven decisions</p>
            </div>
        </div>

        <!-- Values Form -->
        <div class="values-form">
            <form method="post">
                {% csrf_token %}
                
                <!-- Political Philosophy Section -->
                <div class="form-section">
                    <h5><i class="fas fa-compass me-2"></i>Political Philosophy</h5>
                    {{ form.political_philosophy }}
                </div>

                <!-- Core Values & Governance -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-heart me-2"></i>Core Values</h5>
                            {{ form.core_values }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-university me-2"></i>Governance Style</h5>
                            {{ form.governance_style }}
                        </div>
                    </div>
                </div>

                <!-- Priorities & Economics -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-flag me-2"></i>Priority Areas</h5>
                            {{ form.priority_areas }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-chart-line me-2"></i>Economic System</h5>
                            {{ form.economic_system }}
                        </div>
                    </div>
                </div>

                <!-- Rights & Responsibilities -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-shield-alt me-2"></i>Individual Rights</h5>
                            {{ form.individual_rights }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-section">
                            <h5><i class="fas fa-handshake me-2"></i>Collective Responsibilities</h5>
                            {{ form.collective_responsibilities }}
                        </div>
                    </div>
                </div>

                <!-- Cultural Considerations -->
                <div class="form-section">
                    <h5><i class="fas fa-globe me-2"></i>Cultural Considerations</h5>
                    {{ form.cultural_considerations }}
                </div>

                <!-- Submit Button -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary btn-lg px-5">
                        <i class="fas fa-save me-2"></i>Save Values & Principles
                    </button>
                </div>
            </form>
        </div>

        <!-- Help Section -->
        <div class="mt-5">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-question-circle me-2"></i>Need Help Defining Your Values?
                    </h6>
                </div>
                <div class="card-body">
                    <p class="mb-3">Consider these questions to help clarify your political philosophy:</p>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><strong>Government Role:</strong> How much should government intervene in daily life?</li>
                                <li class="mb-2"><strong>Individual vs. Collective:</strong> How do you balance personal freedom with social responsibility?</li>
                                <li class="mb-2"><strong>Economic Philosophy:</strong> What role should markets vs. government play in the economy?</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><strong>Innovation vs. Stability:</strong> How important is rapid change vs. social stability?</li>
                                <li class="mb-2"><strong>Global vs. Local:</strong> How should your state interact with the wider world?</li>
                                <li class="mb-2"><strong>Future Vision:</strong> What kind of society do you want to build?</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function usePhilosophyExample(text) {
    const philosophyField = document.getElementById('id_political_philosophy');
    if (philosophyField) {
        philosophyField.value = text;
        philosophyField.focus();
        
        // Smooth scroll to form
        document.querySelector('.values-form').scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    }
}

// Auto-save functionality
let saveTimeout;
const formFields = document.querySelectorAll('textarea, select');

formFields.forEach(field => {
    field.addEventListener('input', function() {
        clearTimeout(saveTimeout);
        saveTimeout = setTimeout(() => {
            const formData = {};
            formFields.forEach(f => {
                if (f.value) formData[f.name] = f.value;
            });
            localStorage.setItem('values_draft', JSON.stringify(formData));
        }, 1000);
    });
});

// Load saved draft
document.addEventListener('DOMContentLoaded', function() {
    const savedDraft = localStorage.getItem('values_draft');
    if (savedDraft) {
        try {
            const data = JSON.parse(savedDraft);
            Object.keys(data).forEach(key => {
                const field = document.querySelector(`[name="${key}"]`);
                if (field && !field.value) {
                    field.value = data[key];
                }
            });
        } catch (e) {
            console.log('Error loading draft:', e);
        }
    }
});

// Form validation
document.querySelector('form').addEventListener('submit', function(e) {
    const philosophyField = document.getElementById('id_political_philosophy');
    const valuesField = document.getElementById('id_core_values');
    
    if (philosophyField.value.length < 50) {
        e.preventDefault();
        alert('Please provide a more detailed political philosophy (at least 50 characters)');
        philosophyField.focus();
        return;
    }
    
    if (valuesField.value.length < 20) {
        e.preventDefault();
        alert('Please list your core values in more detail (at least 20 characters)');
        valuesField.focus();
        return;
    }
    
    // Clear saved draft on successful submission
    localStorage.removeItem('values_draft');
});
</script>
{% endblock %} 